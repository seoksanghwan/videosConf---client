(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{100:function(e,t,a){e.exports=a(234)},194:function(e,t){},230:function(e,t,a){},234:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),r=a(20),i=a.n(r),c=a(21),l=a(47),s=a(97),m=a.n(s),u=a(33),d=a(7),p=a(61),f=a.n(p),h="IS_LOGIN_USER",E="FETCH_PRODUCTS_BEGIN",v="GET_ERRORS",b="IS_LOGGED_IN_DATA",g="IS_LOGOUT_DATA",O="ROOMS_DATA",j="RTC_SETTING",y="ADD_MEDIA",k="REMOVE_VIDEO",C="READY_TO_CALL",N="LOCAL_VDIEO",D="CONNECTED_LOCAL",L="DISCONNECTED_WEBCAM",I="AUDIO_CHECK",A="ROOM_ADD",V="ROOM_REMOVE",_={items:{},isLoggedIn:!1,error:null,isroom:[],peers:[],inroom:!0,webrtc:null,roomname:"",mute:!1};var w,R=a(22),S=a(98),M=a.n(S),B=a(43),T=a(23),x=a(32),P=a.n(x),U=a(99),F=a.n(U),G=a(12),z=a(13),J=a(15),W=a(14),H=a(16),Y=a(236),q=a(238),K=a(44),Q=a.n(K),X=a(239),Z=a(237),$=a(235),ee=function(e){return o.a.createElement("div",{className:"meeting-room-create"},o.a.createElement("div",{className:"rooms_title"},o.a.createElement("form",null,o.a.createElement("label",{htmlFor:"rooms_title"},o.a.createElement("h1",null,"Vide\u03a9s. ",o.a.createElement($.a,{className:"navbar-item",to:"/rooms"},"Room List")),o.a.createElement("input",{type:"text",id:"rooms_title",name:"rooms_title",ref:e.inputRef,placeholder:"\uc548\ub155\ud558\uc138\uc694!! \ud68c\uc758\uc2e4\uc744 \uc0dd\uc131\ud574\uc8fc\uc138\uc694."}),o.a.createElement("button",{name:"rooms_title",onClick:e.saveFormData},"Create!")))))},te=function(e){return o.a.createElement("div",{className:"container"},o.a.createElement("div",{className:"navbar-start"},o.a.createElement("div",{className:"nav-content"},o.a.createElement("div",{className:"nav-menu"},o.a.createElement("dl",null,o.a.createElement("dt",null,o.a.createElement($.a,{to:"/"},"Vide\u03a9s.")),o.a.createElement("dd",null,o.a.createElement($.a,{to:"/about"},"About")),o.a.createElement("dd",null,e.isLoggedIn?o.a.createElement($.a,{to:"/rooms"},"Public Channel"):o.a.createElement($.a,{onClick:e.signAlert,to:"/"},"Public Channel")),o.a.createElement("dd",null,e.isLoggedIn?o.a.createElement("p",{onClick:e.onLogoutButtonClick},"Sign Out"):o.a.createElement("p",{onClick:e.onLoginButtonClick},"Sign In")))),o.a.createElement("div",{className:"user-info-nav"},e.isLoggedIn?o.a.createElement("p",null,o.a.createElement("img",{src:e.items.url})," ",o.a.createElement("strong",null,e.items.name),"\ub2d8 \uc548\ub155\ud558\uc138\uc694.!!"):o.a.createElement("p",null,"\ub85c\uadf8\uc778\ud574\uc8fc\uc138\uc694.")))))},ae=function(e){function t(e){return Object(G.a)(this,t),Object(J.a)(this,Object(W.a)(t).call(this,e))}return Object(H.a)(t,e),Object(z.a)(t,[{key:"render",value:function(){return o.a.createElement("div",{className:"about"},o.a.createElement("div",{className:"about-content"},o.a.createElement("div",{className:"about-img"},o.a.createElement("img",{src:"https://github.com/seoksanghwan/videosConf---client/blob/master/src/img/video-conf.jpg?raw=true",alt:""})),o.a.createElement("div",{className:"about-info-text"},o.a.createElement("h2",null,"Vide\u03a9s Conf"),o.a.createElement("p",null,"When your team needs to kick off a project, hire a new employee, deploy some code, review a sales contract, finalize next year's budget, measure an A/B test, plan your next office opening, and more, Videos has you covered."))))}}]),t}(o.a.Component),ne=function(e){var t=e.roomDelete,a=e.roomData;return o.a.createElement("div",{className:"rooms-list"},o.a.createElement("dl",null,o.a.createElement("dt",null,o.a.createElement("h2",{className:"title"},"Enjoy Public Room",o.a.createElement("em",null,"\uc5ec\uae30\ub294 \uacf5\uac1c \ud68c\uc758\uc2e4\uc785\ub2c8\ub2e4."))),Object(B.uniqWith)(a,B.isEqual).map(function(e){return o.a.createElement("dd",{key:e._id},o.a.createElement($.a,{to:"rooms/".concat(e.title)},e.title,o.a.createElement("p",null,"Organiser ",e.userName)),o.a.createElement("button",{onClick:t,"data-mail":e.userMail,"data-id":e._id},"Delete"))})))},oe=function(e){function t(e){var a;return Object(G.a)(this,t),(a=Object(J.a)(this,Object(W.a)(t).call(this,e))).remoteVideos={},a}return Object(H.a)(t,e),Object(z.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.match.params.room_name;this.webrtc=this.props.webrtc,this.props.startLoclaVideo(this.localVideo),this.props.AddpeerVideo(this.remoteVideos),this.props.joinChat(e)}},{key:"render",value:function(){var e=this,t=this.props,a=t.peers,n=t.email,r=t.url,i=(t.AddpeerVideo,t.webrtc),c=t.disconnect,l=t.handleSelfMute,s=t.mute,m=t.connectVideo,u=this.props.match.params.room_name;return o.a.createElement("div",{className:"details-box"},o.a.createElement("div",{className:"sidebar local"},o.a.createElement("h2",null,u,o.a.createElement("em",null,o.a.createElement("i",{className:"far fa-user"})," ",a.length+1)),o.a.createElement("div",{className:"localBox"},o.a.createElement("video",{id:"localVideo",autoPlay:!0,ref:function(t){return e.localVideo=t}}),o.a.createElement("div",{className:"nick"},o.a.createElement("p",null," ",n," "))),o.a.createElement("div",{className:"buttons"},o.a.createElement("button",{onClick:m},o.a.createElement("i",{className:"fas fa-video"})),o.a.createElement("button",{onClick:l},s?o.a.createElement("i",{className:"fas fa-volume-up"}):o.a.createElement("i",{className:"fas fa-volume-mute"})),o.a.createElement("button",{onClick:c},o.a.createElement("i",{className:"fas fa-sign-out-alt"}))),o.a.createElement("div",{className:"remotePeerList"},o.a.createElement("h3",null,"Member"),o.a.createElement("ul",null,o.a.createElement("li",null," ",o.a.createElement("img",{src:r,alt:""})," ",o.a.createElement("p",null,n)),a.map(function(e){return o.a.createElement("li",{key:e.id}," ",o.a.createElement("img",{src:e.nick.split(",")[1],alt:""})," ",o.a.createElement("p",null,e.nick.split(",")[0]))})))),o.a.createElement("div",{className:"remotevideo"},i&&a.map(function(t){return o.a.createElement("div",{className:"vidContainer",key:t.id,id:"".concat(i.getContainerId(t))},o.a.createElement("video",{id:i.getId(t),autoPlay:!0,ref:function(a){return e.remoteVideos[t.id]=a},playsInline:!0}),o.a.createElement("div",{className:"nick"},o.a.createElement("p",null,t.nick.split(",")[0])))})))}}]),t}(n.Component),re=function(e){function t(e){return Object(G.a)(this,t),Object(J.a)(this,Object(W.a)(t).call(this,e))}return Object(H.a)(t,e),Object(z.a)(t,[{key:"componentDidUpdate",value:function(){this.props.location.pathname.split("/rooms/")[1]||(this.props.webrtc.connection.disconnect(),this.props.webrtc.stopLocalVideo(),this.props.webrtc.leaveRoom())}},{key:"connectVideo",value:function(){this.props.history.go(0)}},{key:"disconnect",value:function(){this.props.history.push("/rooms")}},{key:"render",value:function(){var e=this,t=this.props,a=t.isLoggedIn,n=t.inputRef,r=t.items,i=t.isroom,c=t.init,l=t.peers,s=t.inroom,m=t.webrtc,u=t.saveFormData,d=t.AddpeerVideo,p=t.joinChat,f=t.startLoclaVideo,h=t.handleSelfMute,E=t.mute;return o.a.createElement("div",{id:"app",className:"container"},o.a.createElement(te,{items:r,isLoggedIn:a,signAlert:this.props.signAlert,onLoginButtonClick:this.props.onLoginButtonClick,onLogoutButtonClick:this.props.onLogoutButtonClick}),o.a.createElement(X.a,null,o.a.createElement(q.a,{exact:!0,path:"/",render:function(e){return o.a.createElement(ee,Object.assign({},e,{isLoggedIn:a,saveFormData:u,inputRef:n}))}}),o.a.createElement(q.a,{exact:!0,path:"/about",render:function(e){return o.a.createElement(ae,e)}}),o.a.createElement(q.a,{exact:!0,path:"/rooms",render:function(t){return a?o.a.createElement(ne,{roomData:i,roomDelete:e.props.roomDelete}):o.a.createElement(Z.a,{to:"/"})}}),o.a.createElement(q.a,{exact:!0,path:"/rooms/:room_name",render:function(t){var n=t.match.params.room_name,u=(i.some(function(e){return e.title===n}),r.email?r.email:"null");return a?o.a.createElement(oe,Object.assign({},t,{init:c,email:u,url:r.url,peers:l,webrtc:m,inroom:s,startLoclaVideo:f,AddpeerVideo:d,joinChat:p,mute:E,connectVideo:e.connectVideo.bind(e),disconnect:e.disconnect.bind(e),handleSelfMute:h,localref:function(t){return e.localVideo=t}})):o.a.createElement("span",null,"Loading...")}}),o.a.createElement(q.a,{render:function(){return o.a.createElement(Z.a,{to:"/"})}})))}}]),t}(o.a.Component),ie=function(e){function t(e){var a;return Object(G.a)(this,t),(a=Object(J.a)(this,Object(W.a)(t).call(this,e))).history=Q()({forceRefresh:!0}),a}return Object(H.a)(t,e),Object(z.a)(t,[{key:"componentDidMount",value:function(){this.props.usingUserData(),this.props.channelData(),this.props.init()}},{key:"signAlertMessage",value:function(){alert("\ub85c\uadf8\uc778\uc744 \ud574\uc8fc\uc138\uc694")}},{key:"saveFormDatas",value:function(e){e.preventDefault();var t=this.props,a=t.isLoggedIn,n=t.items,o=t.isroom;this.props.saveFormData(a,n,this.inputNode.value,o),this.inputNode.value=""}},{key:"roomDeletes",value:function(e){e.preventDefault();var t=e.target.dataset.id,a=e.target.dataset.mail,n=this.props.items;this.props.roomDelete(t,a,n.email)}},{key:"render",value:function(){var e=this,t=this.props,a=t.isLoggedIn,n=t.items,r=t.isroom,i=t.peers,c=t.inroom,l=t.webrtc,s=t.joinChat,m=t.AddpeerVideo,u=t.startLoclaVideo,d=t.handleSelfMute,p=t.mute;return o.a.createElement(Y.a,null,o.a.createElement(q.a,{render:function(t){return null!==l?o.a.createElement(re,Object.assign({},t,{isLoggedIn:a,items:n,isroom:r,saveFormData:e.saveFormDatas.bind(e),roomDelete:e.roomDeletes.bind(e),onLoginButtonClick:e.props.loginUser,onLogoutButtonClick:e.props.userlogout,signAlert:e.signAlertMessage,webrtc:l,peers:i,inroom:c,startLoclaVideo:u,AddpeerVideo:m,mute:p,handleSelfMute:d.bind(e),joinChat:s,inputRef:function(t){return e.inputNode=t}})):null}}))}}]),t}(o.a.Component),ce="https://videos.ap-northeast-2.elasticbeanstalk.com/",le="".concat(ce,"api/auth/"),se=new T.auth.GoogleAuthProvider,me=Q()(),ue=M()(ce),de=Object(l.b)(function(e){var t;return t={items:e.items,isLoggedIn:e.isLoggedIn,error:e.error,isroom:e.isroom},Object(R.a)(t,"isroom",e.isroom),Object(R.a)(t,"peers",e.peers),Object(R.a)(t,"webrtc",e.webrtc),Object(R.a)(t,"mute",e.mute),t},function(e,t){return{loginUser:function(t){T.auth().signInWithPopup(se).then(function(t){t.credential.accessToken;var a=t.user,n={uid:a.uid,name:a.displayName,url:a.photoURL,email:a.email};P.a.post("".concat(le,"login"),n).then(function(t){var a=t.data.token;!function(e){e?P.a.defaults.headers.common.Authorization=e:delete P.a.defaults.headers.common.Authorization}(a);var n=F()(a);e({type:h,data:n}),localStorage.setItem("user",JSON.stringify(n))})}).catch(function(t){e({type:v,error:t})})},usingUserData:function(){var t=JSON.parse(localStorage.getItem("user"));e({type:b,data:t})},userlogout:function(){var t=localStorage.removeItem("user");T.auth().signOut().then(function(){me.push("/"),e({type:g,data:t})}).catch(function(t){e({type:v,error:t})})},channelData:function(){ue.on("initialList",function(t){console.log(t),e({type:O,data:t})}),ue.on("itemAdded",function(t){e({type:A,data:t})}),ue.on("itemRemove",function(t){e({type:V,data:t})})},saveFormData:function(e,t,a,n){var o=Boolean(n.every(function(e){return e.title!==a}));if(e)if(a.length>1&&a.length<11){var r={title:a,userName:t.name,userMail:t.email};o||n===[]?(ue.emit("addItem",r),me.push("/rooms/".concat(a))):alert("\uc911\ubcf5\ub41c \ud68c\uc758\uc2e4\uc774 \uc788\uc2b5\ub2c8\ub2e4.")}else alert("\ud68c\uc758\ubc29 \uc81c\ubaa9\uc740 2\uae00\uc790 \uc774\uc0c1 10\uae00\uc790 \ubbf8\ub9cc\uc774\uc5d0\uc694.\n\ub2e4\uc2dc \ud55c\ubc88 \uc791\uc131\ud574\uc8fc\uc138\uc694");else alert("\ub85c\uadf8\uc778\uc744 \ud574\uc8fc\uc138\uc694")},roomDelete:function(t,a,n){a===n?(ue.emit("removeItem",t),e({type:V}),alert("\ud68c\uc758\uc2e4\uc774 \uc0ad\uc81c\ub418\uc5c8\uc2b5\ub2c8\ub2e4.")):alert("\ud68c\uc758\uc2e4 \uc0ad\uc81c \uad8c\ud55c\uc740 \uc8fc\ucd5c\uc790\uc5d0\uac8c\ub9cc \uc788\uc5b4\uc694.")},init:function(t){var a=JSON.parse(localStorage.getItem("user")),n=null!==a?"".concat(a.email,",").concat(a.url):"Not user";(w=new f.a({url:"https://sm1.lio.app:443/",localVideoEl:"",dataOnly:!1,network:{maxPeers:8,minPeers:4},debug:!1,nick:n})).on("connectionReady",function(t){e({type:D,sessionId:t})}).on("videoRemoved",function(t){e({type:k,peer:t})}),e({type:j,payload:w})},startLoclaVideo:function(t){e({type:N,start:w.startLocalVideo()}),w.config.localVideoEl=t||""},AddpeerVideo:function(t){w.on("videoAdded",function(a,n){t&&(e({type:y,peer:n}),w.attachStream(a,t[n.id],{autoplay:!0}))})},joinChat:function(t){w.on("readyToCall",function(){void 0!==t&&e({type:C,joinroom:w.joinRoom(t)})})},handleSelfMute:function(t){e({type:I,func:w})}}},null,{withref:!0})(ie);a(230);T.initializeApp({apiKey:"AIzaSyA2aWhmtwcW-HJ80tYyv1Hs2A9MRzY3acQ",authDomain:"videoconference-bf935.firebaseapp.com",databaseURL:"https://videoconference-bf935.firebaseio.com",projectId:"videoconference-bf935",storageBucket:"videoconference-bf935.appspot.com",messagingSenderId:"895553387250"});var pe=Object(c.c)(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case E:return Object(d.a)({},e,{islogedin:!1,items:{},isroom:[],inroom:!1});case h:return Object(d.a)({},e,{isLoggedIn:!0,items:t.data,inroom:!1});case b:var a=Boolean(t.data)?t.data:{},n=!!Boolean(t.data);return Object(d.a)({},e,{isLoggedIn:n,items:a,inroom:!1});case g:return Object(d.a)({},e,{isLoggedIn:!1,items:{},isroom:[],inroom:!1});case O:var o=Object(u.a)(t.data).concat(Object(u.a)(e.isroom));return Object(d.a)({},e,{isroom:o,inroom:!1});case A:var r=Object(u.a)(e.isroom).concat([t.data]);return Object(d.a)({},e,{isroom:r});case V:var i=e.isroom,c=t.data,l=i.filter(function(e){return c!==e._id});return Object(d.a)({},e,{isroom:l});case j:return Object(d.a)({},e,{webrtc:t.payload,inroom:!0});case y:var s=Object(u.a)(e.peers).concat([t.peer]);return Object(d.a)({},e,{peers:s});case k:return Object(d.a)({},e,{peers:e.peers.filter(function(e){return!e.closed})});case C:return Object(d.a)({},e,{inroom:!0});case N:case D:case L:return Object(d.a)({},e);case I:return e.mute?t.func.unmute():t.func.mute(),Object(d.a)({},e,{mute:!e.mute});case v:return t.payload;default:return e}},Object(c.a)(m.a));i.a.render(o.a.createElement(l.a,{store:pe},o.a.createElement(de,null)),document.getElementById("root"))}},[[100,2,1]]]);
//# sourceMappingURL=main.57b48a21.chunk.js.map